# Accuracy results

Here we report the accuracy for **final pipeline returned from a TPOT2 run** on each OpenML task.
40 replicates were conducted for each evaluation strategy explored.
Accuracy is proportion of correct predictions on the final, unseen test set per OpenML task.

## Analysis setup

```{r acc-data-setup, message=FALSE}
library(ggplot2)
library(cowplot)
library(dplyr)
library(PupillometryR)

scores <- read.csv("./scores.csv", header = TRUE, stringsAsFactors = FALSE)
scores$acro <- factor(scores$acro, levels = NAMES)
```

## Accuracy per OpenML task

Accuracy of the returned pipeline from an evolutionary run.

### Task 167104


```{r acc-task-1-plt, warning=FALSE, out.width="100%"}
filter(scores, taskid == task_id_lists[1]) %>%
  ggplot(., aes(x = acro, y = accuracy, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_continuous(
    name = "Accuracy %",
    breaks = c(.74, .78, .82, .86),
    labels = scales::percent

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE,) +
  scale_colour_manual(values = cb_palette,) +
  scale_fill_manual(values = cb_palette,) +
  ggtitle("Accuracy") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )

```

Summary statistics for the generation a satisfactory solution is found.

```{r acc-task-1-sum}
performance <- filter(scores, taskid == task_id_lists[1])
performance %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(accuracy)),
    min = min(accuracy, na.rm = TRUE),
    median = median(accuracy, na.rm = TRUE),
    mean = mean(accuracy, na.rm = TRUE),
    max = max(accuracy, na.rm = TRUE),
    IQR = IQR(accuracy, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r acc-task-1-kru}
kruskal.test(accuracy ~ acro, data = performance)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r acc-task-1-wil, warning=FALSE}
pairwise.wilcox.test(x = performance$accuracy, g = performance$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "t")

```
### Task 167184


```{r acc-task-2-plt, warning=FALSE, out.width="100%"}
filter(scores, taskid == task_id_lists[2]) %>%
  ggplot(., aes(x = acro, y = accuracy, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_continuous(
    name = "Accuracy %",
    limits=c(.6, .9),
    labels = scales::percent

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Accuracy") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r acc-task-2-sum}
performance <- filter(scores, taskid == task_id_lists[2])
performance %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(accuracy)),
    min = min(accuracy, na.rm = TRUE),
    median = median(accuracy, na.rm = TRUE),
    mean = mean(accuracy, na.rm = TRUE),
    max = max(accuracy, na.rm = TRUE),
    IQR = IQR(accuracy, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r acc-task-2-kru}
kruskal.test(accuracy ~ acro, data = performance)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r acc-task-2-wil, warning=FALSE}
pairwise.wilcox.test(x = performance$accuracy, g = performance$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "t")

```

### Task 167168


```{r acc-task-3-plt, warning=FALSE, out.width="100%"}
filter(scores, taskid == task_id_lists[3]) %>%
  ggplot(., aes(x = acro, y = accuracy, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_continuous(
    name = "Accuracy %",
    labels = scales::percent

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Accuracy") +
  p_theme
```

Summary statistics for the generation a satisfactory solution is found.

```{r acc-task-3-sum}
performance <- filter(scores, taskid == task_id_lists[3])
performance %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(accuracy)),
    min = min(accuracy, na.rm = TRUE),
    median = median(accuracy, na.rm = TRUE),
    mean = mean(accuracy, na.rm = TRUE),
    max = max(accuracy, na.rm = TRUE),
    IQR = IQR(accuracy, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r acc-task-3-kru}
kruskal.test(accuracy ~ acro, data = performance)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r acc-task-3-wil, warning=FALSE}
pairwise.wilcox.test(x = performance$accuracy, g = performance$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "t")

```

### Task 167161


```{r acc-task-4-plt, warning=FALSE, out.width="100%"}
filter(scores, taskid == task_id_lists[4]) %>%
  ggplot(., aes(x = acro, y = accuracy, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_continuous(
    name = "Accuracy %",
    limits=c(.55, .80),
    breaks=c(.56,.64,.72,.8),
    labels = scales::percent

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Accuracy") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r acc-task-4-sum}
performance <- filter(scores, taskid == task_id_lists[4])
performance %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(accuracy)),
    min = min(accuracy, na.rm = TRUE),
    median = median(accuracy, na.rm = TRUE),
    mean = mean(accuracy, na.rm = TRUE),
    max = max(accuracy, na.rm = TRUE),
    IQR = IQR(accuracy, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r acc-task-4-kru}
kruskal.test(accuracy ~ acro, data = performance)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r acc-task-4-wil, warning=FALSE}
pairwise.wilcox.test(x = performance$accuracy, g = performance$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "t")

```

### Task 167185


```{r acc-task-5-plt, warning=FALSE, out.width="100%"}
filter(scores, taskid == task_id_lists[5]) %>%
  ggplot(., aes(x = acro, y = accuracy, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_continuous(
    name = "Accuracy %",
    limits=c(.86, .96),
    breaks=c(.86,.91,.96),
    labels = scales::percent

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Accuracy") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r acc-task-5-sum}
performance <- filter(scores, taskid == task_id_lists[5])
performance %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(accuracy)),
    min = min(accuracy, na.rm = TRUE),
    median = median(accuracy, na.rm = TRUE),
    mean = mean(accuracy, na.rm = TRUE),
    max = max(accuracy, na.rm = TRUE),
    IQR = IQR(accuracy, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r acc-task-5-kru}
kruskal.test(accuracy ~ acro, data = performance)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r acc-task-5-wil, warning=FALSE}
pairwise.wilcox.test(x = performance$accuracy, g = performance$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "t")

```

### Task 189905


```{r acc-task-6-plt, warning=FALSE, out.width="100%"}
filter(scores, taskid == task_id_lists[6]) %>%
  ggplot(., aes(x = acro, y = accuracy, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_continuous(
    name = "Accuracy %",
    limits=c(.916,1.001),
    breaks=c(.92,.96,1),
    labels = scales::percent

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Accuracy") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r acc-task-6-sum}
performance <- filter(scores, taskid == task_id_lists[6])
performance %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(accuracy)),
    min = min(accuracy, na.rm = TRUE),
    median = median(accuracy, na.rm = TRUE),
    mean = mean(accuracy, na.rm = TRUE),
    max = max(accuracy, na.rm = TRUE),
    IQR = IQR(accuracy, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r acc-task-6-kru}
kruskal.test(accuracy ~ acro, data = performance)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r acc-task-6-wil, warning=FALSE}
pairwise.wilcox.test(x = performance$accuracy, g = performance$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "t")

```