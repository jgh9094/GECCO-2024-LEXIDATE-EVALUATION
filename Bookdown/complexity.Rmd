# Complexity results

Here we report the complexity for **final pipeline returned from a TPOT2 run** on each OpenML task.
40 replicates were conducted for each evaluation strategy explored.
Complexity is the number of learned parameters of the final model.

## Analysis setup

```{r com-data-setup, message=FALSE}
library(ggplot2)
library(cowplot)
library(dplyr)
library(PupillometryR)

comps <- read.csv("./complexity.csv", header = TRUE, stringsAsFactors = FALSE)
comps$acro <- factor(comps$acro, levels = NAMES)
```

## Complexity per OpenML task

Accuracy of the returned pipeline from an evolutionary run.

### Task 167104


```{r com-task-1-plt, warning=FALSE, out.width="100%"}
filter(comps, taskid == task_id_lists[1]) %>%
  ggplot(., aes(x = acro, y = complexity, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_log10(
    name = "Complexity",
    breaks = trans_breaks("log10", function(x) 10^x),
    labels = trans_format("log10", math_format(10^.x))
  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE,) +
  scale_colour_manual(values = cb_palette,) +
  scale_fill_manual(values = cb_palette,) +
  ggtitle("Complexity") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )

```

Summary statistics for the generation a satisfactory solution is found.

```{r com-task-1-sum}
complexity <- filter(comps, taskid == task_id_lists[1])
complexity %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(complexity)),
    min = min(complexity, na.rm = TRUE),
    median = median(complexity, na.rm = TRUE),
    mean = mean(complexity, na.rm = TRUE),
    max = max(complexity, na.rm = TRUE),
    IQR = IQR(complexity, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of no statistical differences.

```{r com-task-1-kru}
kruskal.test(complexity ~ acro, data = complexity)
```

### Task 167184


```{r com-task-2-plt, warning=FALSE, out.width="100%"}
filter(comps, taskid == task_id_lists[2]) %>%
  ggplot(., aes(x = acro, y = complexity, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_log10(
    name = "Complexity",
    breaks = trans_breaks("log10", function(x) 10^x),
    labels = trans_format("log10", math_format(10^.x)),

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Complexity") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r com-task-2-sum}
complexity <- filter(comps, taskid == task_id_lists[2])
complexity %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(complexity)),
    min = min(complexity, na.rm = TRUE),
    median = median(complexity, na.rm = TRUE),
    mean = mean(complexity, na.rm = TRUE),
    max = max(complexity, na.rm = TRUE),
    IQR = IQR(complexity, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r com-task-2-kru}
kruskal.test(complexity ~ acro, data = complexity)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r com-task-2-wil, warning=FALSE}
pairwise.wilcox.test(x = complexity$complexity, g = complexity$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "l")

```

### Task 167168


```{r com-task-3-plt, warning=FALSE, out.width="100%"}
filter(comps, taskid == task_id_lists[3]) %>%
  ggplot(., aes(x = acro, y = complexity, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_log10(
    name = "Complexity",
    breaks = trans_breaks("log10", function(x) 10^x),
    labels = trans_format("log10", math_format(10^.x)),
  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Complexity") +
  p_theme
```

Summary statistics for the generation a satisfactory solution is found.

```{r com-task-3-sum}
complexity <- filter(comps, taskid == task_id_lists[3])
complexity %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(complexity)),
    min = min(complexity, na.rm = TRUE),
    median = median(complexity, na.rm = TRUE),
    mean = mean(complexity, na.rm = TRUE),
    max = max(complexity, na.rm = TRUE),
    IQR = IQR(complexity, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of no statistical differences.

```{r com-task-3-kru}
kruskal.test(complexity ~ acro, data = complexity)
```

### Task 167161


```{r com-task-4-plt, warning=FALSE, out.width="100%"}
filter(comps, taskid == task_id_lists[4]) %>%
  ggplot(., aes(x = acro, y = complexity, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_log10(
    name = "Complexity",
    breaks = trans_breaks("log10", function(x) 10^x),
    labels = trans_format("log10", math_format(10^.x)),

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Complexity") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r com-task-4-sum}
complexity <- filter(comps, taskid == task_id_lists[4])
complexity %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(complexity)),
    min = min(complexity, na.rm = TRUE),
    median = median(complexity, na.rm = TRUE),
    mean = mean(complexity, na.rm = TRUE),
    max = max(complexity, na.rm = TRUE),
    IQR = IQR(complexity, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r com-task-4-kru}
kruskal.test(complexity ~ acro, data = complexity)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r com-task-4-wil, warning=FALSE}
pairwise.wilcox.test(x = complexity$complexity, g = complexity$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "l")

```

### Task 167185


```{r com-task-5-plt, warning=FALSE, out.width="100%"}
filter(comps, taskid == task_id_lists[5]) %>%
  ggplot(., aes(x = acro, y = complexity, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_log10(
    name = "Complexity",
    breaks = trans_breaks("log10", function(x) 10^x),
    labels = trans_format("log10", math_format(10^.x)),
  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Complexity") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r com-task-5-sum}
complexity <- filter(comps, taskid == task_id_lists[5])
complexity %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(complexity)),
    min = min(complexity, na.rm = TRUE),
    median = median(complexity, na.rm = TRUE),
    mean = mean(complexity, na.rm = TRUE),
    max = max(complexity, na.rm = TRUE),
    IQR = IQR(complexity, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of no statistical differences.

```{r com-task-5-kru}
kruskal.test(complexity ~ acro, data = complexity)
```

### Task 189905


```{r com-task-6-plt, warning=FALSE, out.width="100%"}
filter(comps, taskid == task_id_lists[6]) %>%
  ggplot(., aes(x = acro, y = complexity, color = acro,
                fill = acro, shape = acro)) +
  geom_flat_violin(position = position_nudge(x = 0.1, y = 0),
                   scale = "width", alpha = 0.2, width = 1.5) +
  geom_boxplot(color = "black", width = .08, outlier.shape = NA, alpha = 0.0,
               size = 0.8, position = position_nudge(x = .15, y = 0)) +
  geom_point(position = position_jitter(width = .015, height = .0001),
             size = 2.0, alpha = 1.0) +
  scale_y_log10(
    name = "Complexity",
    breaks = trans_breaks("log10", function(x) 10^x),
    labels = trans_format("log10", math_format(10^.x)),

  ) +
  scale_x_discrete(
    name = "Treatment"
  ) +
  scale_shape_manual(values = SHAPE) +
  scale_colour_manual(values = cb_palette, ) +
  scale_fill_manual(values = cb_palette) +
  ggtitle("Complexity") +
  p_theme +
  guides(
    shape=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    color=guide_legend(nrow = 1, title.position = "bottom",
                       title = "Evaluation strategy"),
    fill=guide_legend(nrow = 1, title.position = "bottom",
                      title = "Evaluation strategy")
  )
```

Summary statistics for the generation a satisfactory solution is found.

```{r com-task-6-sum}
complexity <- filter(comps, taskid == task_id_lists[6])
complexity %>%
  group_by(acro) %>%
  dplyr::summarise(
    count = n(),
    na_cnt = sum(is.na(complexity)),
    min = min(complexity, na.rm = TRUE),
    median = median(complexity, na.rm = TRUE),
    mean = mean(complexity, na.rm = TRUE),
    max = max(complexity, na.rm = TRUE),
    IQR = IQR(complexity, na.rm = TRUE)
  )
```

Kruskal–Wallis test illustrates evidence of statistical differences.

```{r com-task-6-kru}
kruskal.test(complexity ~ acro, data = complexity)
```

Results for post-hoc Wilcoxon rank-sum test with a Bonferroni correction.

```{r com-task-6-wil, warning=FALSE}
pairwise.wilcox.test(x = complexity$complexity, g = complexity$acro,
                     p.adjust.method = "bonferroni",
                     paired = FALSE, conf.int = FALSE, alternative = "l")
```